(function() {
  var $, PATH_REGEX, Point, fs, path;

  fs = require('fs');

  path = require('path');

  Point = require('atom').Point;

  $ = require('atom-space-pen-views').$;

  PATH_REGEX = /((?:\w:)?[^:\s\(\)]+):(\d+):(\d+)/g;

  module.exports.link = function(line) {
    if (line == null) {
      return null;
    }
    return line.replace(PATH_REGEX, '<a class="flink">$&</a>');
  };

  module.exports.attachClickHandler = function() {
    return $(document).on('click', '.flink', module.exports.clicked);
  };

  module.exports.removeClickHandler = function() {
    return $(document).off('click', '.flink', module.exports.clicked);
  };

  module.exports.clicked = function() {
    var extendedPath;
    extendedPath = this.innerHTML;
    return module.exports.open(extendedPath);
  };

  module.exports.open = function(extendedPath) {
    var col, filename, parts, row, _ref;
    parts = PATH_REGEX.exec(extendedPath);
    if (parts == null) {
      return;
    }
    _ref = parts.slice(1), filename = _ref[0], row = _ref[1], col = _ref[2];
    if (filename == null) {
      return;
    }
    if (!fs.existsSync(filename)) {
      alert("File not found: " + filename);
      return;
    }
    return atom.workspace.open(filename).then(function() {
      var editor, position;
      if (row == null) {
        return;
      }
      row = Math.max(row - 1, 0);
      col = Math.max(~~col - 1, 0);
      position = new Point(row, col);
      editor = atom.workspace.getActiveTextEditor();
      if (editor == null) {
        return;
      }
      editor.scrollToBufferPosition(position, {
        center: true
      });
      return editor.setCursorBufferPosition(position);
    });
  };

}).call(this);

//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAiZmlsZSI6ICIiLAogICJzb3VyY2VSb290IjogIiIsCiAgInNvdXJjZXMiOiBbCiAgICAiL1VzZXJzL2J6aXR0bGF1Ly5hdG9tL3BhY2thZ2VzL21vY2hhLXRlc3QtcnVubmVyL2xpYi9jbGlja2FibGUtcGF0aHMuY29mZmVlIgogIF0sCiAgIm5hbWVzIjogW10sCiAgIm1hcHBpbmdzIjogIkFBQUE7QUFBQSxNQUFBLDhCQUFBOztBQUFBLEVBQUEsRUFBQSxHQUFVLE9BQUEsQ0FBUSxJQUFSLENBQVYsQ0FBQTs7QUFBQSxFQUNBLElBQUEsR0FBVSxPQUFBLENBQVEsTUFBUixDQURWLENBQUE7O0FBQUEsRUFFQyxRQUFTLE9BQUEsQ0FBUSxNQUFSLEVBQVQsS0FGRCxDQUFBOztBQUFBLEVBR0MsSUFBUyxPQUFBLENBQVEsc0JBQVIsRUFBVCxDQUhELENBQUE7O0FBQUEsRUFLQSxVQUFBLEdBQWEsb0NBTGIsQ0FBQTs7QUFBQSxFQU9BLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBZixHQUFzQixTQUFDLElBQUQsR0FBQTtBQUNwQixJQUFBLElBQW1CLFlBQW5CO0FBQUEsYUFBTyxJQUFQLENBQUE7S0FBQTtXQUNBLElBQUksQ0FBQyxPQUFMLENBQWEsVUFBYixFQUF3Qix5QkFBeEIsRUFGb0I7RUFBQSxDQVB0QixDQUFBOztBQUFBLEVBWUEsTUFBTSxDQUFDLE9BQU8sQ0FBQyxrQkFBZixHQUFvQyxTQUFBLEdBQUE7V0FDbEMsQ0FBQSxDQUFFLFFBQUYsQ0FBVyxDQUFDLEVBQVosQ0FBZSxPQUFmLEVBQXdCLFFBQXhCLEVBQWtDLE1BQU0sQ0FBQyxPQUFPLENBQUMsT0FBakQsRUFEa0M7RUFBQSxDQVpwQyxDQUFBOztBQUFBLEVBZUEsTUFBTSxDQUFDLE9BQU8sQ0FBQyxrQkFBZixHQUFvQyxTQUFBLEdBQUE7V0FDbEMsQ0FBQSxDQUFFLFFBQUYsQ0FBVyxDQUFDLEdBQVosQ0FBZ0IsT0FBaEIsRUFBeUIsUUFBekIsRUFBbUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFsRCxFQURrQztFQUFBLENBZnBDLENBQUE7O0FBQUEsRUFrQkEsTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFmLEdBQXlCLFNBQUEsR0FBQTtBQUN2QixRQUFBLFlBQUE7QUFBQSxJQUFBLFlBQUEsR0FBZSxJQUFJLENBQUMsU0FBcEIsQ0FBQTtXQUNBLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBZixDQUFvQixZQUFwQixFQUZ1QjtFQUFBLENBbEJ6QixDQUFBOztBQUFBLEVBdUJBLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBZixHQUFzQixTQUFDLFlBQUQsR0FBQTtBQUNwQixRQUFBLCtCQUFBO0FBQUEsSUFBQSxLQUFBLEdBQVEsVUFBVSxDQUFDLElBQVgsQ0FBZ0IsWUFBaEIsQ0FBUixDQUFBO0FBQ0EsSUFBQSxJQUFjLGFBQWQ7QUFBQSxZQUFBLENBQUE7S0FEQTtBQUFBLElBR0EsT0FBcUIsS0FBSyxDQUFDLEtBQU4sQ0FBWSxDQUFaLENBQXJCLEVBQUMsa0JBQUQsRUFBVSxhQUFWLEVBQWMsYUFIZCxDQUFBO0FBSUEsSUFBQSxJQUFjLGdCQUFkO0FBQUEsWUFBQSxDQUFBO0tBSkE7QUFNQSxJQUFBLElBQUEsQ0FBQSxFQUFTLENBQUMsVUFBSCxDQUFjLFFBQWQsQ0FBUDtBQUNFLE1BQUEsS0FBQSxDQUFPLGtCQUFBLEdBQWtCLFFBQXpCLENBQUEsQ0FBQTtBQUNBLFlBQUEsQ0FGRjtLQU5BO1dBVUEsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFmLENBQW9CLFFBQXBCLENBQ0EsQ0FBQyxJQURELENBQ00sU0FBQSxHQUFBO0FBQ0osVUFBQSxnQkFBQTtBQUFBLE1BQUEsSUFBYyxXQUFkO0FBQUEsY0FBQSxDQUFBO09BQUE7QUFBQSxNQUdBLEdBQUEsR0FBTSxJQUFJLENBQUMsR0FBTCxDQUFTLEdBQUEsR0FBTSxDQUFmLEVBQWtCLENBQWxCLENBSE4sQ0FBQTtBQUFBLE1BSUEsR0FBQSxHQUFNLElBQUksQ0FBQyxHQUFMLENBQVMsQ0FBQSxDQUFDLEdBQUQsR0FBUSxDQUFqQixFQUFvQixDQUFwQixDQUpOLENBQUE7QUFBQSxNQUtBLFFBQUEsR0FBZSxJQUFBLEtBQUEsQ0FBTSxHQUFOLEVBQVcsR0FBWCxDQUxmLENBQUE7QUFBQSxNQU9BLE1BQUEsR0FBUyxJQUFJLENBQUMsU0FBUyxDQUFDLG1CQUFmLENBQUEsQ0FQVCxDQUFBO0FBUUEsTUFBQSxJQUFjLGNBQWQ7QUFBQSxjQUFBLENBQUE7T0FSQTtBQUFBLE1BVUEsTUFBTSxDQUFDLHNCQUFQLENBQThCLFFBQTlCLEVBQXdDO0FBQUEsUUFBQSxNQUFBLEVBQU8sSUFBUDtPQUF4QyxDQVZBLENBQUE7YUFXQSxNQUFNLENBQUMsdUJBQVAsQ0FBK0IsUUFBL0IsRUFaSTtJQUFBLENBRE4sRUFYb0I7RUFBQSxDQXZCdEIsQ0FBQTtBQUFBIgp9

//# sourceURL=/Users/bzittlau/.atom/packages/mocha-test-runner/lib/clickable-paths.coffee

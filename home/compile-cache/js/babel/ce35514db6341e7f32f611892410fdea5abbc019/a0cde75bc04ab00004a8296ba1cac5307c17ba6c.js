'use babel';

Object.defineProperty(exports, '__esModule', {
  value: true
});
exports.activate = activate;
exports.copyTreeFile = copyTreeFile;
exports.copyOpenFile = copyOpenFile;
var path = require('path');

/**
 * Atom package activation
 */

function activate() {
  var _this = this;

  atom.commands.add('atom-workspace', {
    'copy-filename:copy-tree-view-name': function copyFilenameCopyTreeViewName() {
      return _this.copyTreeFile();
    },
    'copy-filename:copy-open-file-filename': function copyFilenameCopyOpenFileFilename() {
      return _this.copyOpenFile();
    }
  });
}

/**
 * Copy's a name from tree-view context to clipboard
 */

function copyTreeFile() {
  var packageObj = undefined;

  // Require package to get path from
  if (atom.packages.isPackageLoaded('tree-view') === true) {
    var treeView = atom.packages.getLoadedPackage('tree-view');
    treeView = require(treeView.mainModulePath);
    packageObj = treeView.serialize();
  } else if (atom.packages.isPackageLoaded('sublime-tabs') === true) {
    var sublimeTabs = atom.packages.getLoadedPackage('sublime-tabs');
    sublimeTabs = require(sublimeTabs.mainModulePath);
    packageObj = sublimeTabs.serialize();
  } else {
    console.warn('copy-filename: no tree-view or sublime-tabs package\n                  loaded, copy-filename isn\'t loaded');
    return;
  }

  // Extract and copy path
  if (typeof packageObj !== 'undefined' && packageObj !== null) {
    if (packageObj.selectedPath) {
      atom.clipboard.write(path.basename(packageObj.selectedPath));
    }
  }
}

/**
 * Copy the name from the current focused file to clipboard
 */

function copyOpenFile() {
  var editor = atom.workspace.getActivePaneItem();
  if (!editor) {
    return;
  }

  var file = editor.buffer.file;
  if (!file) {
    return;
  }
  atom.clipboard.write(path.basename(file.path));
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9ieml0dGxhdS8uYXRvbS9wYWNrYWdlcy9jb3B5LWZpbGVuYW1lL2xpYi9jb3B5LWZpbGVuYW1lLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFdBQVcsQ0FBQzs7Ozs7Ozs7QUFFWixJQUFJLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7Ozs7OztBQUtwQixTQUFTLFFBQVEsR0FBRzs7O0FBQ3pCLE1BQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFO0FBQ2xDLHVDQUFtQyxFQUFFLHdDQUFNO0FBQ3pDLGFBQU8sTUFBSyxZQUFZLEVBQUUsQ0FBQztLQUM1QjtBQUNELDJDQUF1QyxFQUFFLDRDQUFNO0FBQzdDLGFBQU8sTUFBSyxZQUFZLEVBQUUsQ0FBQztLQUM1QjtHQUNGLENBQUMsQ0FBQztDQUNKOzs7Ozs7QUFLTSxTQUFTLFlBQVksR0FBRztBQUM3QixNQUFJLFVBQVUsWUFBQSxDQUFDOzs7QUFHZixNQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsZUFBZSxDQUFDLFdBQVcsQ0FBQyxLQUFLLElBQUksRUFBRTtBQUN2RCxRQUFJLFFBQVEsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLGdCQUFnQixDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQzNELFlBQVEsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxDQUFDO0FBQzVDLGNBQVUsR0FBRyxRQUFRLENBQUMsU0FBUyxFQUFFLENBQUM7R0FDbkMsTUFBTSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsZUFBZSxDQUFDLGNBQWMsQ0FBQyxLQUFLLElBQUksRUFBRTtBQUNqRSxRQUFJLFdBQVcsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLGdCQUFnQixDQUFDLGNBQWMsQ0FBQyxDQUFDO0FBQ2pFLGVBQVcsR0FBRyxPQUFPLENBQUMsV0FBVyxDQUFDLGNBQWMsQ0FBQyxDQUFDO0FBQ2xELGNBQVUsR0FBRyxXQUFXLENBQUMsU0FBUyxFQUFFLENBQUM7R0FDdEMsTUFBTTtBQUNMLFdBQU8sQ0FBQyxJQUFJLDhHQUNzQyxDQUFDO0FBQ25ELFdBQU87R0FDUjs7O0FBR0QsTUFBSSxPQUFPLFVBQVUsS0FBSyxXQUFXLElBQUksVUFBVSxLQUFLLElBQUksRUFBRTtBQUM1RCxRQUFJLFVBQVUsQ0FBQyxZQUFZLEVBQUU7QUFDM0IsVUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztLQUM5RDtHQUNGO0NBQ0Y7Ozs7OztBQUtNLFNBQVMsWUFBWSxHQUFHO0FBQzdCLE1BQUksTUFBTSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztBQUNoRCxNQUFJLENBQUMsTUFBTSxFQUFFO0FBQ1gsV0FBTztHQUNSOztBQUVELE1BQUksSUFBSSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDO0FBQzlCLE1BQUksQ0FBQyxJQUFJLEVBQUU7QUFDVCxXQUFPO0dBQ1I7QUFDRCxNQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0NBQ2hEIiwiZmlsZSI6Ii9Vc2Vycy9ieml0dGxhdS8uYXRvbS9wYWNrYWdlcy9jb3B5LWZpbGVuYW1lL2xpYi9jb3B5LWZpbGVuYW1lLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBiYWJlbCc7XG5cbnZhciBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuXG4vKipcbiAqIEF0b20gcGFja2FnZSBhY3RpdmF0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgYXRvbS5jb21tYW5kcy5hZGQoJ2F0b20td29ya3NwYWNlJywge1xuICAgICdjb3B5LWZpbGVuYW1lOmNvcHktdHJlZS12aWV3LW5hbWUnOiAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5jb3B5VHJlZUZpbGUoKTtcbiAgICB9LFxuICAgICdjb3B5LWZpbGVuYW1lOmNvcHktb3Blbi1maWxlLWZpbGVuYW1lJzogKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuY29weU9wZW5GaWxlKCk7XG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBDb3B5J3MgYSBuYW1lIGZyb20gdHJlZS12aWV3IGNvbnRleHQgdG8gY2xpcGJvYXJkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb3B5VHJlZUZpbGUoKSB7XG4gIGxldCBwYWNrYWdlT2JqO1xuXG4gIC8vIFJlcXVpcmUgcGFja2FnZSB0byBnZXQgcGF0aCBmcm9tXG4gIGlmIChhdG9tLnBhY2thZ2VzLmlzUGFja2FnZUxvYWRlZCgndHJlZS12aWV3JykgPT09IHRydWUpIHtcbiAgICBsZXQgdHJlZVZpZXcgPSBhdG9tLnBhY2thZ2VzLmdldExvYWRlZFBhY2thZ2UoJ3RyZWUtdmlldycpO1xuICAgIHRyZWVWaWV3ID0gcmVxdWlyZSh0cmVlVmlldy5tYWluTW9kdWxlUGF0aCk7XG4gICAgcGFja2FnZU9iaiA9IHRyZWVWaWV3LnNlcmlhbGl6ZSgpO1xuICB9IGVsc2UgaWYgKGF0b20ucGFja2FnZXMuaXNQYWNrYWdlTG9hZGVkKCdzdWJsaW1lLXRhYnMnKSA9PT0gdHJ1ZSkge1xuICAgIGxldCBzdWJsaW1lVGFicyA9IGF0b20ucGFja2FnZXMuZ2V0TG9hZGVkUGFja2FnZSgnc3VibGltZS10YWJzJyk7XG4gICAgc3VibGltZVRhYnMgPSByZXF1aXJlKHN1YmxpbWVUYWJzLm1haW5Nb2R1bGVQYXRoKTtcbiAgICBwYWNrYWdlT2JqID0gc3VibGltZVRhYnMuc2VyaWFsaXplKCk7XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS53YXJuKGBjb3B5LWZpbGVuYW1lOiBubyB0cmVlLXZpZXcgb3Igc3VibGltZS10YWJzIHBhY2thZ2VcbiAgICAgICAgICAgICAgICAgIGxvYWRlZCwgY29weS1maWxlbmFtZSBpc24ndCBsb2FkZWRgKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBFeHRyYWN0IGFuZCBjb3B5IHBhdGhcbiAgaWYgKHR5cGVvZiBwYWNrYWdlT2JqICE9PSAndW5kZWZpbmVkJyAmJiBwYWNrYWdlT2JqICE9PSBudWxsKSB7XG4gICAgaWYgKHBhY2thZ2VPYmouc2VsZWN0ZWRQYXRoKSB7XG4gICAgICBhdG9tLmNsaXBib2FyZC53cml0ZShwYXRoLmJhc2VuYW1lKHBhY2thZ2VPYmouc2VsZWN0ZWRQYXRoKSk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQ29weSB0aGUgbmFtZSBmcm9tIHRoZSBjdXJyZW50IGZvY3VzZWQgZmlsZSB0byBjbGlwYm9hcmRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvcHlPcGVuRmlsZSgpIHtcbiAgbGV0IGVkaXRvciA9IGF0b20ud29ya3NwYWNlLmdldEFjdGl2ZVBhbmVJdGVtKCk7XG4gIGlmICghZWRpdG9yKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbGV0IGZpbGUgPSBlZGl0b3IuYnVmZmVyLmZpbGU7XG4gIGlmICghZmlsZSkge1xuICAgIHJldHVybjtcbiAgfVxuICBhdG9tLmNsaXBib2FyZC53cml0ZShwYXRoLmJhc2VuYW1lKGZpbGUucGF0aCkpO1xufVxuIl19
//# sourceURL=/Users/bzittlau/.atom/packages/copy-filename/lib/copy-filename.js
